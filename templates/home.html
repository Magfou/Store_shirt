{% extends 'base.html' %}

{% block content %}
    {% if user.is_authenticated %}
        <h2>Товары</h2>
        <div class="product-grid">
            {% for product in products %}
                <div class="product-card">
                    <img src="https://via.placeholder.com/150" alt="{{ product.name }}">
                    <h3>{{ product.name }}</h3>
                    <div class="price {% if product.discount_price %}discounted{% endif %}">
                        {{ product.price }} $
                    </div>
                    {% if product.discount_price %}
                        <div class="discount-price">{{ product.discount_price }} $</div>
                    {% endif %}
                    <div class="availability {% if product.in_stock %}in-stock{% else %}out-of-stock{% endif %}">
                        {% if product.in_stock %}
                            Есть в наличии
                        {% else %}
                            Нет в наличии
                        {% endif %}
                    </div>
                    <button class="btn-add-to-cart" {% if not product.in_stock %}disabled{% endif %}>В корзину</button>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="text-center">
            <h2>Добро пожаловать!</h2>
            <p>Пожалуйста, <a href="#" data-bs-toggle="modal" data-bs-target="#loginModal">войдите</a> или <a href="#" data-bs-toggle="modal" data-bs-target="#registerModal">зарегистрируйтесь</a>, чтобы увидеть товары.</p>
        </div>
    {% endif %}
{% endblock %}