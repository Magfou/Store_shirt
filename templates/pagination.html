<!-- templates/pagination.html -->
{% if user.is_authenticated %}
    {% block pagination %}
        {% if products_page.has_other_pages %}
            <div class="pagination-container">
                <div class="pagination">
                    {% if products_page.has_previous %}
                        <a href="?page={{ products_page.previous_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}{% if selected_category %}&category={{ selected_category }}{% endif %}{% if sort_by %}&sort={{ sort_by }}{% endif %}">«</a>
                    {% else %}
                        <span>«</span>
                    {% endif %}

                    {% for num in products_page.paginator.page_range %}
                        {% if products_page.number == num %}
                            <span class="current">{{ num }}</span>
                        {% else %}
                            <a href="?page={{ num }}{% if search_query %}&search={{ search_query }}{% endif %}{% if selected_category %}&category={{ selected_category }}{% endif %}{% if sort_by %}&sort={{ sort_by }}{% endif %}">{{ num }}</a>
                        {% endif %}
                    {% endfor %}

                    {% if products_page.has_next %}
                        <a href="?page={{ products_page.next_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}{% if selected_category %}&category={{ selected_category }}{% endif %}{% if sort_by %}&sort={{ sort_by }}{% endif %}">»</a>
                    {% else %}
                        <span>»</span>
                    {% endif %}
                </div>
            </div>
        {% endif %}
    {% endblock %}
{% endif %}